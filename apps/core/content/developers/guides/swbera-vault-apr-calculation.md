---
head:
  - - meta
    - property: og:title
      content: SWBERA Vault APR Calculation
  - - meta
    - name: description
      content: How to calculate the Annual Percentage Rate (APR) for the SWBERA staker vault
  - - meta
    - property: og:description
      content: How to calculate the Annual Percentage Rate (APR) for the SWBERA staker vault
---

<script setup>
  import config from '@berachain/config/constants.json';
</script>

# SWBERA Vault APR Calculation

This guide explains how to calculate the Annual Percentage Rate (APR) for the SWBERA staker vault using the `previewRedeem` function.

## Overview

The SWBERA vault APR is calculated by measuring the change in share value over a 24-hour period and annualizing the return. This provides a real-time view of the yield being generated by the vault.

## Calculation Method

### Step 1: Get Share Value

Use the `previewRedeem` function to determine how much WBERA you would receive for 1 share:

```solidity
function previewRedeem(uint256 shares) external view returns (uint256 assets)
```

**Parameters:**

- `shares`: Number of shares (use 1 share with 18 decimals: `1000000000000000000`)

**Returns:**

- `assets`: Amount of WBERA you would receive for the given shares

### Step 2: Calculate 24-Hour Return

1. Get the current share value: `previewRedeem(1e18)` at current block
2. Get the share value 24 hours ago: `previewRedeem(1e18)` at block 24 hours ago
3. Calculate the difference: `current_value - previous_value`

### Step 3: Annualize the Return

Multiply the 24-hour return by 365 to get the annualized rate:

$$\text{APR} = \frac{\text{Current Share Value} - \text{Previous Share Value}}{\text{Previous Share Value}} \times 365 \times 100$$

## Implementation Example

```javascript
const { ethers } = require("ethers");

async function calculateSWBERAAPR(vaultContract, provider) {
  // Step 1: Get current share value
  const currentBlock = await provider.getBlockNumber();
  const currentShareValue = await vaultContract.previewRedeem(ethers.parseEther("1"));

  // Step 2: Get share value from 24 hours ago
  const blocksPerDay = (24 * 60 * 60) / 12; // Assuming 12-second block time
  const previousBlock = currentBlock - blocksPerDay;
  const previousShareValue = await vaultContract.previewRedeem(ethers.parseEther("1"), {
    blockTag: previousBlock
  });

  // Step 3: Calculate APR
  const return24h = currentShareValue - previousShareValue;
  const apr = (return24h * 365n * 10000n) / previousShareValue; // Basis points

  return {
    currentShareValue: ethers.formatEther(currentShareValue),
    previousShareValue: ethers.formatEther(previousShareValue),
    return24h: ethers.formatEther(return24h),
    apr: Number(apr) / 100 // Convert basis points to percentage
  };
}

// Usage
const vaultAddress = "{{ config.contracts.pol.wberaStakerVault['mainnet-address'] }}";
const vaultABI = [
  "function previewRedeem(uint256 shares) external view returns (uint256 assets)"
];
const vaultContract = new ethers.Contract(vaultAddress, vaultABI, provider);

const result = await calculateSWBERAAPR(vaultContract, provider);
console.log(`SWBERA Vault APR: ${result.apr.toFixed(2)}%`);
```

## Key Considerations

### Time Frame

- **Current**: 24-hour measurement period
- **Future**: Planning to move to weekly measurements for more stable APR calculations

### Precision

- All calculations use 18 decimal precision
- Share values are denominated in WBERA
- APR is calculated in basis points and converted to percentage

### Block Considerations

- Ensure you have access to historical block data
- Account for potential chain reorganizations
- Consider using multiple data points for more accurate calculations

## Contract Addresses

| Network | Contract Address                                                 |
| ------- | ---------------------------------------------------------------- |
| Mainnet | `{{ config.contracts.pol.wberaStakerVault['mainnet-address'] }}` |
| Testnet | `{{ config.contracts.pol.wberaStakerVault['bepolia-address'] }}` |

## Related Documentation

- [WBERA Staker Vault Contract Reference](/developers/contracts/wbera-staker-vault)
- [BERA Staking Guide](/learn/guides/bera-staking)
- [ERC4626 Standard](https://eips.ethereum.org/EIPS/eip-4626)
